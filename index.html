<head>
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/css/reveal.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/css/theme/white.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/display/fullscreen.css"/>
<style>
		code, .CodeMirror {
				tab-size: .5em;
		}
		.CodeMirror {
				font-size: .3em !important;
		}

		.CodeMirror pre {
				box-shadow: none;
		}
		.small {
				font-size: 80% !important;
		}
		.smaller {font-size: 50% !important;} .smallest {
				font-size: 35% !important;
		}
		#tabbed-uis h1 {
				font-size: 90%;
		}
</style>
<div class="reveal">
		<div class="slides">

				<section data-markdown id="main">
						# gimgen
						----
						George Mauer
						@togakangaroo - [http://georgemauer.net](http://georgemauer.net)
				</section>

				<section id="manual-iterator-implementation-slide">
						<h1 class="smaller" >Iterators are Simple</h1>
						<textarea class="code-editor" mode="javascript" id="manual-iterator-implementation">
const manualFibbonacci = () => {
		let prev1 = 1, prev2 = 1, step = 0
		return {
				next: () => {
						if(step > 100)
								return {value: undefined, done: true};
						step += 1
						if(step <= 2)
								return {value: 1, done: false};
						[prev1, prev2] = [prev2, prev1 + prev2]
						return {value: prev2, done: false};
				}
		}
}
						</textarea>
						<button class="run">Run</button>
						<textarea class="code-editor" mode="javascript" data-depends="#manual-iterator-implementation">
const fib = manualFibbonacci()
console.log(fib.next())
console.log(fib.next())
console.log(fib.next())
console.log(fib.next())
						</textarea>
				</section>

				<section id="manual-iterator-usage">
						<h1 class="small" >Iterators can be...well...iterated</h1>
						<button class="run">Run</button>
						<textarea class="code-editor" mode="javascript" data-depends="#manual-iterator-implementation">
const fibIterator = manualFibbonacci()
let x
while((x = fibIterator.next(), !x.done))
		console.log(x.value)
						</textarea>
				</section>

				<section id="for-iterator-usage">
						<h1 class="small">Iterators can be used in loops</h1>
						<button class="run">Run</button>
						<textarea class="code-editor" mode="javascript" data-depends="#manual-iterator-implementation">
const thingToIterate = {}
thingToIterate[Symbol.iterator] = manualFibbonacci

for(let val of thingToIterate)
		console.log(val)
						</textarea>
						<p>
								Yup, you can make anything iterable!
						</p>
				</section>

				<section id="duck-tree-slide">
						<h1 class="small">Lets talk about ducks</h1>
						<img src="img/duck-family-tree.jpg" height="600"> <script type="js-later/text" id="duck-tree">
								const duck = (name, children=[]) => ({name, children})
								const fergus =
								duck("Fergus", [
										duck("Matilda"),
										duck("Scrooge"),
										duck("Hortense", [
												duck("Donald"),
												duck("Della", [
														duck("Huey"),
														duck("Dewey"),
														duck("Louie"),
												])
										]),
								])
						</script>
				</section>

				<section id="manual-duck-iteration">
						<h1 class="small" >Iterators can flatten</h1>
						<button class="run">Run</button>
						<textarea class="code-editor" mode="javascript" data-depends="#duck-tree">
const getAllManual = (root) => {
		const stack = [root]
		return {
				next: () => {
						if(!stack.length)
								return {value: undefined, done: true}
						const value = stack.pop()
						for(let c of value.children)
							stack.push(c)
						return {value, done: false}
				}
		}
}

fergus[Symbol.iterator] = () => getAllManual(fergus)
for(let {name} of fergus)
	console.log(name)
						</textarea>
				</section>

				<section id="generator-fibonacci">
						<h1 class="small" >Generators are a simpler iterator syntax</h1>
						<button class="run">Run</button>
						<textarea class="code-editor" mode="javascript">
const fibonacci = function * () {
		let prev1 = 1
		let prev2 = 2
		yield prev1
		yield prev2
		for(let i = 0; i < 98; i+=1) {
				[prev1, prev2]  = [prev2, prev1 + prev2]
				yield prev2
		}
}

for(let v of fibonacci())
	console.log(v)
						</textarea>
				</section>

				<section id="generator-duck-iteration">
						<h1 class="small" >Flattening with generators</h1>
						<button class="run">Run</button>
						<textarea class="code-editor" mode="javascript" data-depends="#duck-tree">
const getAll = function * (root) {
		yield root
		for(let c of root.children)
				yield * getAll(c)
}
for(let {name} of getAll(fergus))
	console.log(name)
						</textarea>
				</section>

		</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/lib/js/head.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/js/reveal.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/keymap/vim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/display/fullscreen.min.js"></script>
<script>{
const sampleCodes = document.querySelectorAll('.sample-code')
for(let codeBlock of sampleCodes)
		codeBlock.closest('section').querySelector('pre>code').textContent = codeBlock.innerHTML
}</script>
<script>{
Reveal.initialize({
		history: true,
		dependencies: [
				{ src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/highlight/highlight.min.js', async: true, callback:() => hljs.initHighlightingOnLoad() },
				{ src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/markdown/marked.js', condition:() => !!document.querySelector( '[data-markdown]' ) },
				{ src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/markdown/markdown.min.js', condition:() => !!document.querySelector( '[data-markdown]' ) },
				{ src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/zoom-js/zoom.min.js', async: true },
				{ src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/notes/notes.min.js', async: true },
		]
});
const codeMirrors = new Map()
Reveal.addEventListener( 'slidechanged', ({currentSlide}) => {
		for(let el of currentSlide.querySelectorAll('.code-editor'))
				codeMirrors.get(el) && codeMirrors.get(el).refresh()
} );

setTimeout(() => {
		for(let el of document.querySelectorAll('textarea.code-editor')) {
				const ed = CodeMirror.fromTextArea(el, {
						lineNumbers: true,
						keyMap: 'vim',
						extraKeys: {
								"F11": (cm) => {
										cm.setOption("fullScreen", !cm.getOption("fullScreen"))
								},
						},
				});
				ed.on('change', () => ed.save());
				codeMirrors.set(el, ed)
		}
}, 500)
for(let button of document.querySelectorAll('.run')) {
		const codeEl = button.nextElementSibling
		if(!codeEl.matches('.code-editor'))
				continue;
		const dependsOnEditors = !codeEl.dataset.depends ? [] : Array.from(document.querySelectorAll(codeEl.dataset.depends))
		const editorsToRun = [...dependsOnEditors, codeEl]
		button.addEventListener('click', () =>{
				const codeToRun = editorsToRun.map(ce => ce.value).join('\n;')
				console.clear()
				eval(`{
${codeToRun}
}`)
		})
}
}</script>
